@import 'components/error';
@import 'components/file-upload';

@mixin gravity-forms-styling($args: ()) {
  $settings: map-merge((
    'datepicker': false,
    'datepicker-primary-color': #337ab7,
    'error-bordered': false,
    'error-color': #ce4844,
    'field-width': 70%,
    'horizontal-layout': 641px,
    'label-width': 30%,
  ), $args);

  /**
   * Helper mixin
   */
  @mixin _horizontal-from-breakpoint() {
    @media(min-width: map-get($settings, 'horizontal-layout')) {
      float: right;
      width: map-get($settings, 'field-width');
    }
  }

  /**
   * Global Gravity Forms class
   */
  .gform_wrapper {
    @include _error(map-get($settings, 'error-color'), map-get($settings, 'error-bordered'));
    @include _file-upload(map-get($settings, 'horizontal-layout'));

    .gform_body {
      float: left;
      margin-bottom: 1rem;
    }

    /**
     * Main list styles
     */
    ul {
      list-style: none;
      margin: 0;
      padding: 0;
    }

    li {
      float: left;
      margin-bottom: 1rem;
      width: 100%;

      // Checkboxes / radio buttons
      li {
        margin-bottom: 0;

        label {
          display: inline;
          float: none;
          margin-bottom: 0;
        }
      }
    }

    /**
     * Label & container
     */
    .gfield_label {
      display: block;
      margin-bottom: 5px;

      @media(min-width: map-get($settings, 'horizontal-layout')) {
        float: left;
        margin-bottom: 0;
        padding-right: 20px;
        width: map-get($settings, 'label-width');
      }
    }

    .ginput_container {
      @include _horizontal-from-breakpoint();

      > input,
      > textarea,
      > select {
        display: block;
        width: 100%;
      }
    }

    /**
     * Field descriptions
     */
    .gfield_description {
      @include _horizontal-from-breakpoint();
      font-size: 80%;
      font-style: italic;
      margin-top: 0.25rem;
    }

    /**
     * Sections and titles
     */
    .gform_description,
    .gfield_html {
      display: block;
      margin-bottom: 2rem;
    }

    .gsection {
      margin: 1rem 0 2rem;
    }

    .gsection_title {
      margin-bottom: 0;
    }

    /**
     * Input types
     */
    .ginput_container_checkbox,
    .ginput_container_radio {
      @include _horizontal-from-breakpoint();
    }

    [type="checkbox"],
    [type="radio"] {
      margin-right: 10px;
    }
  }

  @if map-get($settings, 'datepicker') {
    $border: #ddd;
    $shadow: rgba(0, 0, 0, 0.2);
    $white: #fff;

    .ui-datepicker {
      background: $white;
      border: 1px solid $border;
      box-shadow: 0 0 50px $shadow;
      padding: 1rem;

      /**
       * Header
       */
      .ui-datepicker-title {
        margin-bottom: 1rem;
      }

      .ui-datepicker-prev,
      .ui-datepicker-next {
        display: none;
      }

      select {
        width: 100%;

        &:first-child {
          margin-bottom: 0.5rem;
        }
      }

      /**
       * table
       */
      table {
        font-size: 80%;
        line-height: normal;
        margin-bottom: 0;
      }

      th,
      td {
        padding: 8px;

        @media(min-width: 341px) {
          padding: 10px;
        }
      }

      a,
      a:hover {
        text-decoration: none;
      }

      td {
        cursor: default;
        text-align: center;
      }

      td:not(.ui-datepicker-unselectable) {
        cursor: pointer;

        &.ui-datepicker-current-day,
        &:hover {
          background: map-get($settings, 'datepicker-primary-color');

          a {
            color: $white;
          }
        }
      }
    }
  }
}
